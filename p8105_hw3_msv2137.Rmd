---
title: "HW 3"
author: "Malvika Venkataraman"
date: "10/17/2021"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(dplyr)
```

# Problem 1

```{r}
#load data
library(p8105.datasets)
data("instacart")

#View(instacart)
```

## Description of Data

```{r}
#understanding the dataset
str(instacart)
nrow(instacart)
ncol(instacart)
length(unique(instacart$user_id))

order_1 <- instacart[1,]

order_1$order_id
order_1$product_id
order_1$add_to_cart_order
order_1$product_name
```

The dataset `instacart` records online grocery orders from Instacart users.  It contains `r nrow(instacart)` observations from `r length(unique(instacart$user_id))` unique users. The dataset has `r nrow(instacart)` rows and `r ncol(instacart)` columns. Some key variables are as follows:

* order_id: order identifier
* product_id: product identifier
* reordered: coded as 1 if this product has been ordered by the user in the past, 0 if otherwise
* product_name: name of the product
* order_number: the order sequence number for a user (1 = first, n = nth)
* days_since_prior_order: days since the last order, but capped at 30 days (NA of order_number = 1)

Let's take a look at a single row of data. In order `r order_1$order_id`, user `r order_1$user_id` ordered `r order_1$product_name` (product id = `r order_1$product_id`). The product is from the `r order_1$department` department, and was in the `r order_1$aisle` aisle. It was the `r order_1$add_to_cart_order`st product they added to their cart. This user has placed an order `r order_1$order_number` times before, and this product has been previously ordered by them (reordered = `r order_1$reordered`). The order was placed on a Thursday (order_dow = `r order_1$order_dow`), in the `r order_1$order_hour_of_day`th hour of the day (10am), and `r order_1$days_since_prior_order` days since the user last placed an Instacart order.  

### Aisles
How many aisles are there, and which aisles are the most items ordered from?
```{r}
aisle_data = instacart %>% 
  distinct(aisle) %>% 
  nrow()
```
There are `r aisle_data` aisles.

```{r}
most_items_aisle = instacart %>% 
  count(aisle) %>% 
  arrange(desc(n)) %>%
  top_n(3)

```

The `r most_items_aisle$aisle[1]` aisle, is where the most items have been ordered from. The `r most_items_aisle$aisle[2]` aisle, is where the second most items have been ordered from. The `r most_items_aisle$aisle[3]` aisle, is where the third most items have been ordered from. 


Make a plot that shows the number of items ordered in each aisle, limiting this to aisles with more than 10000 items ordered. Arrange aisles sensibly, and organize your plot so others can read it.
Make a table showing the three most popular items in each of the aisles “baking ingredients”, “dog food care”, and “packaged vegetables fruits”. Include the number of times each item is ordered in your table.
Make a table showing the mean hour of the day at which Pink Lady Apples and Coffee Ice Cream are ordered on each day of the week; format this table for human readers (i.e. produce a 2 x 7 table).
